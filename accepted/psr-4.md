## PSR-4: Стандарт Автозагрузки

Ключевые слова 'ДОЛЖНЫ', 'НЕ ДОЛЖНЫ', 'ТРЕБУЕТСЯ', 'НУЖНО', 'НЕ НУЖНО', 'СЛЕДУЕТ', 'НЕ СЛЕДУЕТ', 'РЕКОМЕНДУЕТСЯ', 'МОЖЕТ' и 'НЕОБЯЗАТЕЛЬНО' в этом документе должны толковаться так, как описано в [RFC 2119](../rfc2119.md).

#### 1. Обзор

Этот PSR описывает спецификацию для [автоматической загрузки][phpautoload] классов из путей к файлам. Он полностью совместим и может использоваться в дополнение к любой другой спецификации автоматической загрузки, включая PSR-0. Эта рекомендация описывает, где разместить файлы, которые будут автоматически загружаться в соответствии со спецификацией.

#### 2. Спецификация

1. Термин "класс" относится к классам, интерфейсам, трейтам и другим подобным структурам.

1. Полное имя класса имеет следующий вид:

    ` \<NamespaceName>(\<SubNamespaceNames>)*\<ClassName>`

    1. Полное имя класса ДОЛЖНО начинаться с пространства имен верхнего уровня, также известное как "пространство имен разработчика".
    2. Полное имя класса МОЖЕТ иметь одно или несколько подпространств имен.
    3. Полное имя класса ДОЛЖНО иметь конечное имя класса.
    4. Подчеркивания не имеют особого значения ни в одной части полного имени класса.
    5. Буквенные символы в полном имени класса МОГУТ быть любым сочетанием строчных и прописных букв.
    6. На все имена классов необходимо ссылаться с учетом регистра.

1. Правила загрузки файла, который соответствует полному имени класса

    1. Последовательность из одного или нескольких имен пространств и подпространств, не включая ведущий разделитель пространств имен, в полностью определенном имени класса ("префикс пространства имен") соответствует хотя бы одному "базовому каталогу".
    2. Последовательность имен подпространств и имен после "префикса пространства имен" соответствуют подкаталогу в "базовом каталоге", в котором разделители пространства имен означают разделители каталога. Имя подкаталога ДОЛЖНО соответствовать регистру имен подпространств.
    3. Имя завершающего класса соответствует имени файла, оканчивающемуся на `.php`. Имя файла ДОЛЖНО совпадать с регистром имени класса.

1. Реализации автозагрузчика НЕ ДОЛЖНЫ выбрасывать исключения, НЕ ДОЛЖНЫ вызывать ошибки любого уровня и НЕ ДОЛЖНЫ возвращать значение.

#### 3. Примеры

В таблице ниже представлены соответствующие пути к файлу для заданного полного имени класса, префикса пространства имен и базового каталога.

|ПОЛНОЕ ИМЯ КЛАССА           |ПРЕФИКС ПРОСТРАНСТВА ИМЕН|БАЗОВЫЙ КАТАЛОГ       |РЕЗУЛЬТИРУЮЩИЙ ПУТЬ К ФАЙЛУ              |
|:---------------------------|:------------------------|:---------------------|:----------------------------------------|
|\Acme\Log\Writer\File_Writer|Acme\Log\Writer          |./acme-log-writer/lib/|./acme-log-writer/lib/File_Writer.php    |
|\Aura\Web\Response\Status   |Aura\Web                 |/path/to/aura-web/src/|/path/to/aura-web/src/Response/Status.php|
|\Symfony\Core\Request       |Symfony\Core             |./vendor/Symfony/Core/|./vendor/Symfony/Core/Request.php        |
|\Zend\Acl                   |Zend                     |/usr/includes/Zend/   |/usr/includes/Zend/Acl.php               |

Реализации автозагрузчиков, соответствующих спецификации, см. в [файле примеров][example]. Примеры реализации НЕ ДОЛЖНЫ рассматриваться как часть спецификации и МОГУТ изменяться в любое время.

[phpautoload]: https://www.php.net/autoload
[example]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader-examples.md
